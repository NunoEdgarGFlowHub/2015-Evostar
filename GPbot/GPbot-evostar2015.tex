
%%%%%%%%%%%%%%%%%%%%%%% file typeinst.tex %%%%%%%%%%%%%%%%%%%%%%%%%
%
% This is the LaTeX source for the instructions to authors using
% the LaTeX document class 'llncs.cls' for contributions to
% the Lecture Notes in Computer Sciences series.
% http://www.springer.com/lncs       Springer Heidelberg 2006/05/04
%
% It may be used as a template for your own input - copy it
% to a new file with a new name and use it as the basis
% for your article.
%
% NB: the document class 'llncs' has its own and detailed documentation, see
% ftp://ftp.springer.de/data/pubftp/pub/tex/latex/llncs/latex2e/llncsdoc.pdf
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\documentclass[runningheads,a4paper]{llncs}

\usepackage{amssymb}
\setcounter{tocdepth}{3}
\usepackage{graphicx}

\usepackage{url}
\newcommand{\keywords}[1]{\par\addvspace\baselineskip
\noindent\keywordname\enspace\ignorespaces#1}

\begin{document}

\mainmatter  % start of an individual contribution

% first the title is needed
\title{It's time to stop: investigating termination conditions in the evolution of game bots}

% a short form should be given in case it is too long for the running head
\titlerunning{It's time to stop}

% the name(s) of the author(s) follow(s) next
%
% NB: Chinese authors should write their first names(s) in front of
% their surnames. This ensures that the names appear correctly in
% the running heads and the author index.
%
\author{Non A. Me%
\thanks{NoInstitute}}
%
\authorrunning{Me, N}
% (feature abused for this document to repeat the title also on left hand pages)

% the affiliations are given next; don't give your e-mail address
% unless you accept that it will be published
\institute{No Institute}

%
% NB: a more complex sample for affiliations and the mapping to the
% corresponding authors can be found in the file "llncs.dem"
% (search for the string "\mainmatter" where a contribution starts).
% "llncs.dem" accompanies the document class "llncs.cls".
%

\maketitle


\begin{abstract}
Determining the end of the evolutionary process in the design of a
game bot is not as easy as it would a priori seem. The first issue is
that there is no known optimum, because most games make sure that there is
no single best way of creating a bot that defeats all enemies; once it
is found, there is no challenge left. Then, in
most games, fitness is noisy, so that even if you use reaching a certain level
of fitness as a termination condition, there is no guarantee that the
individual with that fitness is not going to change next
generation it is evaluated. Other possibilities, such as certain level
of victories over external enemies as a termination condition,
present the problem that the bots will be overfitted to
those particular enemies. Even as any of these conditions is not
perfect, there is the possibility of combining several of them as
termination condition so that bots that are as optimal as possible,
(and in as general a context as it is possible) are found; also,
in a minimal amount of time and evaluations. In this paper
we will examine several ways of ending an evolutionary
game bot design process, determining the capabilities of every one of
them and, eventually, selecting one for future designs. We will use a particular
game, Planet Wars, in which we already have some experience, but the
conclusions to our study could, in principle, be extended to any RTS
or even any game with non-deterministic match results and with an
unknown best solution.
\keywords{Games, RTS, evolutionary algorithms, coevolution}
\end{abstract}

\section{Introduction}

The termination condition in Evolutionary Algorithms (EA) is a key
factor in algorithms and their experimental setups since it affects the performance of
the algorithm solution and the amount of resources devoted to it. The
usual termination conditions are a fixed number of generations (or
evaluations), which is related to a fixed {\em computing cycles}
budget for doing the experiments or a fixed amount of generations in
which the best solution is not improved, or distance to the optimum,
among others \cite{RocheTermination13}. However, neither one might be
available in certain problems like the one that occupies us in this
paper: games. 

The usual approach is using a fixed number of evaluations or time,
usually given by the game or challenge conditions. That is obviously
not the right approach for finding the best bot, or even one that is
good enough to defeat existing ones. That is why finding the optimal termination condition is essential in the search for
game AI's (also called \textit{bots}) that competes in a particular
challenge. If there is not a fixed evaluation budget, the next usual solution is to give
it as much as you have got, which is fair if you are designing a bot 
to participate in a competition \cite{DBLP:conf/cec/Fernandez-AresMGGF11}. However, from a methodological point
of view, if you want to compare different approaches to design a bot
it needs to be done in conditions that are as similar as possible, which
might make {\em as much as you have got} a bit short on
details. Methods that are going to be compared need to have an
independent stopping criterion, since using for any method the same
time or the same number of evaluations is not usually fair. This
makes, from the methodological point of view, inadequate to use the
number of computing cycles as a termination condition. 
 
This is a general problem for most kinds of games and many other
problems without a fixed set of solutions. But this problem is
composed in games due to
the noisy and combat-based methods used for player generation because
there is no single way to compute the fitness. Any way you choose, it
is usually impossible to reach a global optimum short from managing to obtain a bot that, as
in Sun Tzu's ``Art of war'' \cite{tzu2013art}, is able to beat the opponent without
fighting, as the opponents are not known before the EA is running. To
solve this, usually previously-known opponents are used in the fitness
function and an ``optimum'' is reached when a certain number of
victories are obtained. However, this may generate over-fitted
solutions that only beat the  enemies that have been used to compute
the fitness \cite{DBLP:journals/jcst/MoraFGGF12}.

Finally, there is noise which is inherent in most games, since the
opponent bot, the game environment, the bot itself or all of them have
a random component which might make the result of a match uncertain to
a certain level and most ways of computing fitness {\em noisy} in the
sense that different values will be yielded every time it is
measured. The fitness values follow a particular distribution
\cite{merelo14:noisy}, but from the point of view of this paper the
problem is to use that fitness distribution as a termination
condition. 


In this paper, we present a study on different termination conditions to 
generate competitive bots for videogames using Genetic Programming (GP). The game \textit{Planet Wars} has been chosen in 
our experimental setup, as it is a simplified RTS (Real Time Simulator) combat-based
game (only one type of resource, one type of attack and one type
of unit), and also it has been widely used in the literature, using different generation methods and fitness functions 
\cite{DBLP:journals/jcst/MoraFGGF12,DBLP:conf/cec/Fernandez-AresMGGF11,DBLP:journals/nc/Lara-CabreraCL14,NogueiraCoevolutionary14}. 

Summarizing, our objective in this paper is to study different 
termination conditions to find the method that converges to good 
solutions (the best, if possible). To measure the quality of each 
method, we will use the time needed to obtain a solution and the
quality of that solution as metrics. In principle, the termination
condition chosen could be extrapolated to any game with
stochastic behaviour and combat-based results.

The rest of the paper is organized as follows. Next section
establishes the state of the art in the use of termination conditions
for this kind of evolutionary algorithms in which the optimum is not
known and/or is noisy. Next in Section \ref{sec:met} we will present the different termination
conditions we will be checking in this work and how they contribute to
prove which one has better behaviour in this context; we will also
sketch the problem we are using in this particular paper, evolution of
bot for Planet Wars. Results will be presented in Section
\ref{sec:met}, followed by the conclusions and a discussion of the
implication of the obtained results.

\section{State of the Art}
%% TODO: esto está en redacción...

Real world optimization problems often involve uncertain environment including noisy and/or dynamic environments \cite{Jin2005303,QianYZ13}.
Basic strategies to handle noisy fitness functions include using a larger population size, averaging to filter out the noise (re-sampling) \cite{Branke98,Branke2001}, thresholding (employing a threshold value to be used in a selection operator for noisy fitness functions) \cite{Markon2001} or changing the selection criteria.
Other authors propose complex methods such as including the multipopulation approach, special operators or case-based memory \cite{BhattacharyaIM14}. 

%--- Took out reference to our own paper, which should be taken out to the intro. I don't think anything above this is really relevant, other than referencing a very general paper that deals with noise (or our own paper at IJCCCI) - JJ


In \cite{merelo14:noisy}, Merelo et al. propose dealing with the problem of noisy fitness functions using two methods, the former based on re-evaluation of surviving individuals and the latter that uses a Wilcoxon test to compare a sample of individuals and partial-order them within the population.

% TERMINATION CRITERIA

As many EA depend on population diversity for its evolution, a termination condition given in terms of the rate of population diversity decrease would be useful. 
In this sense, Roche et al. \cite{RocheTermination13} propose terminating the evolution process by analyzing the EA population diversity. Thus, they presents a numeric approximation to steady states that is used to detect the moment that the population has lost its diversity for algorithm termination.


Usually, the algorithm termination is decided based on a heuristic stopping criteria, such as the maximum number of evaluations or on reaching a performance level during the run. 
When the algorithm converges, it is terminated in order to avoid wasting computational resources.
Although these criteria are suitable for well defined benchmark problems (the optimum is known), they are not applicable to real world problems. 
In these cases, more sophisticated heuristic stopping criteria have to be used \cite{NME2909,Wagner2009,Wagner2010}.

In the last years some adaptive alternatives have been proposed  as termination conditions.
In this sense, Safe et al. \cite{Safe2004} present a review of the state-of-the-art in the design of termination conditions and convergence analysis in GAs.
The main problem is determining an accurate value for the number of generations, so that the GA convergence is guaranteed.
Authors propose searching the minimum number of generations by means of a convergence analysis \cite{Rudolph1994}.


Finally, as stated in Hart et al. \cite{Hart1996} when calculating metrics of parallel performance, it is incorrect to stop a parallel EA either after a fixed number of iterations or when the average fitness exhibits little variation. In this case, stopping rules based on the attainment of thresholds should be used, i.e. stopping the run when a solution that reaches this threshold is found \cite{Sena2001}. Nevertheless, threshold definition requires a good estimation of the optimum of the problem under study, which is unavailable in many cases \cite{Safe2004}.

% A conclusion should be added to this based on the last paragraph - JJ

\section{Methodology and experimental setup}
\label{sec:met}

This section describes the different termination approaches to be tested in the paper. Everyone is commented and justified.
Then, the parameter setup and the different experiments to be conducted are also presented and discussed. The aim is to analyse the differences in performance.

\subsection{Termination Criteria}
A set of three different algorithm stop criteria is going to be checked in the paper, namely:
\begin{itemize}
    \item \textit{Number of generations}: the classical termination
      criteria in evolutionary algorithms. 30, 50 and 100 will be
      considered, having in mind that the previous approach of GPBot
      [CITA EVO* 2014] used 50. As indicated in the previous section,
      Hart  \cite{Hart1996} claims that this is not the right way to
      compare different approaches; however, we include it here as a
      baseline for comparison of the other approaches. 
    \item \textit{Age}: number of generations that the best individual has remained in the following population (in the next generation). Some limits have been set, based in the average obtained through systematic experimentation. These are 3, 5, and 10 of the number of generations.
    \item \textit{Replacement rate}: if the number of individuals
      replaced by the offspring decreases under a threshold, then the
      search would be stagnated and the algorithm could stop. Three
      different rates have been tested, namely 10\%, 20\%, 30\%... % but this has to be combined with a steady state approach or something. By itself, it does not mean a thing. Please explain - JJ
\end{itemize}

The first two criteria are based in the...

The aim of the experiments is to test the set of termination criteria...

% 12 pages is the limit. 
\section{Results}
\label{sec:res}

\section{Conclusions}

\section*{Acknowledgements}

Hidden for double-blind review

\bibliographystyle{unsrt}
\bibliography{geneura,references}

\end{document}
